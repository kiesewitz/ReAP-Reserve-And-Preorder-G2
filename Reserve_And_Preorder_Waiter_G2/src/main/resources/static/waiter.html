<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <title>Kellner â€“ Ãœbersicht</title>

    <!-- Verweis auf das ausgelagerte Stylesheet im selben Verzeichnis -->
    <link rel="stylesheet" href="waiter.css">
    <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
<header>Kellner â€“ Tische & Bestellungen (Auto-Refresh: 5 Sek.)</header>

<div class="container grid">
    <!-- Tische -->
    <section class="card">
        <h2>Tische</h2>
        <div class="toolbar">
            <input id="q" type="search" placeholder="Suche Tisch / Bestellung / Itemâ€¦" />
            <button id="refreshBtn" class="btn-gray">â†» Aktualisieren</button>
        </div>
        <div id="tables" class="table-grid"></div>
    </section>

    <!-- Bestellungen -->
    <section class="card">
        <h2>Offene Bestellungen</h2>
        <div id="orders"></div>
    </section>
</div>

<!-- Modal fÃ¼r Bestellung aufnehmen -->
<div id="orderModal" class="modal-overlay" style="display:none;">
    <div class="modal">
        <div class="modal-header">
            <h3 id="orderModalTitle">Bestellung aufnehmen</h3>
            <button class="modal-close" onclick="closeOrderModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="menu-select-row">
                <select id="menuSelect" class="nice-select"></select>
                <input type="number" id="menuQty" placeholder="Menge" min="1" value="1" />
                <button class="btn-blue" onclick="addOrderItem()">+ HinzufÃ¼gen</button>
            </div>
            <div class="menu-hint">Nur Produkte aus der Speisekarte auswÃ¤hlbar</div>
            <div id="orderItemsList"></div>
            <div class="price-row">
                <label>Gesamtpreis:</label>
                <div id="orderTotal" class="order-total">â‚¬ 0.00</div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-gray" onclick="closeOrderModal()">Abbrechen</button>
            <button class="btn-green" onclick="submitOrder()">Bestellung senden</button>
        </div>
    </div>
</div>

<!-- Modal fÃ¼r Bestellungen anzeigen -->
<div id="viewOrdersModal" class="modal-overlay" style="display:none;">
    <div class="modal">
        <div class="modal-header">
            <h3 id="viewOrdersTitle">Bestellungen</h3>
            <button class="modal-close" onclick="closeViewOrdersModal()">&times;</button>
        </div>
        <div class="modal-body" id="viewOrdersContent"></div>
        <div class="modal-footer">
            <button class="btn-gray" onclick="closeViewOrdersModal()">SchlieÃŸen</button>
        </div>
    </div>
</div>

<!-- Modal fÃ¼r Bezahlung -->
<div id="paymentModal" class="modal-overlay" style="display:none;">
    <div class="modal" style="max-width: 400px;">
        <div class="modal-header" style="background: #0d6efd; color: white;">
            <h3>ðŸ’³ Bezahlung</h3>
            <button class="modal-close" onclick="closePaymentModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="payment-summary">
                <div id="paymentTableInfo" class="payment-table"></div>
                <div class="payment-total">Gesamt: <strong id="paymentTotal">â‚¬ 0.00</strong></div>
            </div>

            <div class="payment-methods">
                <label class="payment-method">
                    <input type="radio" name="paymentMethod" value="CARD" checked>
                    ðŸ’³ Karte
                </label>
                <label class="payment-method">
                    <input type="radio" name="paymentMethod" value="CASH">
                    ðŸ’µ Bar
                </label>
            </div>

            <div id="cashSection" class="cash-section" style="display:none;">
                <label for="cashReceived">Erhalten:</label>
                <input type="number" id="cashReceived" placeholder="0.00" min="0" step="0.01" />
                <div class="change-row">RÃ¼ckgeld: <strong id="changeAmount">â‚¬ 0.00</strong></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-gray" onclick="closePaymentModal()">Abbrechen</button>
            <button class="btn-green" onclick="confirmPayment()">Zahlung bestÃ¤tigen</button>
        </div>
    </div>
</div>

<!-- Modal fÃ¼r Walk-in -->
<div id="walkinModal" class="modal-overlay" style="display:none;">
    <div class="modal" style="max-width: 420px;">
        <div class="modal-header" style="background: #6c757d; color: white;">
            <h3>ðŸ‘¥ Walk-in</h3>
            <button class="modal-close" onclick="closeWalkinModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="walkin-info" id="walkinTableInfo"></div>
            <label for="walkinGuests">Anzahl GÃ¤ste</label>
            <input type="number" id="walkinGuests" min="1" placeholder="z.B. 4" />
            <div class="walkin-hint" id="walkinHint"></div>
        </div>
        <div class="modal-footer">
            <button class="btn-gray" onclick="closeWalkinModal()">Abbrechen</button>
            <button class="btn-blue" onclick="submitWalkin()">BestÃ¤tigen</button>
        </div>
    </div>
</div>

<!-- Modal fÃ¼r Tisch abserviert -->
<div id="cleanedModal" class="modal-overlay" style="display:none;">
    <div class="modal" style="max-width: 400px;">
        <div class="modal-header" style="background: #2196F3; color: white;">
            <h3>âœ¨ Tisch bereit</h3>
        </div>
        <div class="modal-body" style="text-align: center; padding: 30px;">
            <div style="font-size: 48px; margin-bottom: 20px;">âœ“</div>
            <h2 style="color: #2196F3; margin-bottom: 15px;">Tisch abserviert!</h2>
            <p id="cleanedTableInfo" style="font-size: 16px; color: #666; margin-bottom: 20px;"></p>
            <p style="font-size: 14px; color: #999;">âœ… Tisch ist jetzt frei fÃ¼r neue GÃ¤ste</p>
        </div>
        <div class="modal-footer">
            <button class="btn-blue" onclick="closeCleanedModal()" style="width: 100%;">OK</button>
        </div>
    </div>
</div>

<!-- Verweis auf das ausgelagerte JavaScript -->
<script src="waiter.js?v=2" defer></script>
</body>
</html>
